### 说一下强引用、软引用、弱引用、虚引用以及他们之间和gc的关系

>  	​	从Java SE2开始，就提供了四种类型的引用：**强引用、软引用、弱引用和虚引用**。Java中提供这四种引用类型主要有两个目的：第一是可以让程序员通过代码的方式决定某些对象的生命周期；第二是有利于JVM进行垃圾回收。 
>
>  **强引用**
>
>  ​	之前我们使用的大部分引用实际上都是强引用，这是使用最普遍的引用。只要还有强引用指向一个对象，垃圾收集器就不会回收这个对象。 当内存空间不足，Java虚拟机宁愿抛出OutOfMemoryError错误，使程序异常终止，也不回收这种对象。 
>
>  ```java
>  Object object = new Object();
>  String str = "StrongReference";
>  ```
>
>  **软引用**
>
>  ​	如果一个对象只具有软引用，在内存足够时，垃圾回收器不会回收它；如果内存不足，就会回收这个对象的内存。 这个特性很适合用来实现缓存：比如网页缓存、图片缓存等。
>
>  ​	软引用可以和一个引用队列（ReferenceQueue）联合使用，如果软引用所引用的对象被JVM回收，这个软引用就会被加入到与之关联的引用队列中。 
>
>  **弱引用**
>
>  ​	当垃圾回收器扫描到只具有弱引用的对象，不管当前内存空间是否足够，都会回收内存。  在java中，用java.lang.ref.WeakReference类来表示。 
>
>  **虚引用**
>
>  ​	虚引用和前面的软引用、弱引用不同，它并不影响对象的生命周期。  在java中用java.lang.ref.PhantomReference类表示。如果一个对象与虚引用关联，则跟没有引用与之关联一样，在任何时候都可能被垃圾回收器回收。虚引用主要用来跟踪对象被垃圾回收的活动。 
>
>  ​	虚引用必须和引用队列关联使用，当垃圾回收器准备回收一个对象时，如果发现它还有虚引用，就会把这个虚引用加入到与之 关联的引用队列中。程序可以通过判断引用队列中是否已经加入了虚引用，来了解被引用的对象是否将要被垃圾回收。如果程序发现某个虚引用已经被加入到引用队列，那么就可以在所引用的对象的内存被回收之前采取必要的行动。